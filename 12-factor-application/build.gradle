apply plugin: 'war'
apply plugin: 'eclipse-wtp'
apply plugin: 'maven-publish'

//Dependencies
repositories { mavenCentral(); }

dependencies {
	compile group:'javax.servlet', name:'javax.servlet-api', version:'3.1.0'
}

// Set the Eclipse facets to use 3.0 of the Dynamic Web Module
eclipse {
    wtp {
        facet {
            facet name: 'java', version: '1.7'
            facet name: 'jst.web', version: '3.0'
        }
    }
}

// Copy WAR into build directory, from here it will need to be copied to a liberty server to run
task publishWar(dependsOn: 'jar', type: Copy) {
	from(war)
	into('build/lib/apps')
}

assemble.dependsOn('publishWar')

publishing {
	publications {
		mavenWar(MavenPublication) {
			version '1.0-SNAPSHOT'
			groupId 'net.wasdev.wlp.sample'
			artifactId 'microservices-12factor'
			
			from components.web
		}
	}
}